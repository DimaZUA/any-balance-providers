var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(d){return d.raw=d};$jscomp.createTemplateTagFirstArgWithRaw=function(d,a){d.raw=a;return d};
var BrowserAPI=function(){var d=function(a){this.options=a;this.headerMatchCounts=[]};d.prototype.requestAPI=function(a,b){var e=this.options.debug?"http://localhost:4024":this.options.win?"https://browin.anybalance.ru":"http://browser.anybalance.ru:4024";b=b?AnyBalance.requestPost(e+"/"+a,JSON.stringify(b),{Referer:this.options.provider+"","Content-Type":"application/json"},{options:{DEFAULT_CHARSET:"utf-8"}}):AnyBalance.requestGet(e+"/"+a+(0<=a.indexOf("?")?"&":"?")+"_="+ +new Date,{Referer:this.options.provider+
""});e=JSON.parse(b);if("ok"!==e.status)throw AnyBalance.trace(b),new AnyBalance.Error("Ошибка browser api ("+a+"): "+e.message);return e};d.prototype.open=function(a){var b=this.requestAPI("base/open",{userAgent:this.options.userAgent,singlePage:this.options.singlePage,headful:this.options.headful,noInterception:this.options.noInterception,incognito:this.options.incognito,url:a,rules:this.options.rules});AnyBalance.trace("Opening page "+a+": "+b.page);return b};d.prototype.waitForLoad=function(a){var b=
0,e=this.options.binaryResponses?"base64":void 0;do{++b;AnyBalance.sleep(3E3);var l=this.requestAPI("base/status?page="+a);AnyBalance.trace("Loading status of page "+a+": "+l.loadStatus+" (попытка "+b+")");if(l.pendingRequests&&0<l.pendingRequests.length)for(var r=0;r<l.pendingRequests.length;++r){var g=l.pendingRequests[r],p=[],q;for(q in g.headers){var f=g.headers[q];if(""!==f.trim()){f=f.split("\n");for(var c=0;c<f.length;++c)"content-length"!==q.toLowerCase()&&p.push([q,f[c]])}}f={};if(this.options.additionalRequestHeaders)for(c=
0;c<this.options.additionalRequestHeaders.length;++c){var h=this.options.additionalRequestHeaders[c];if(!h.url||h.url.test(g.url)){var m=this.headerMatchCounts;if(!h.maxCount||(m[c]||0)<h.maxCount){f=h.headers||{};h.maxCount&&(m[c]=(m[c]||0)+1);break}}}p=AnyBalance.requestPost(g.url,g.body,addHeaders(f,p),{HTTP_METHOD:g.method,options:{FORCE_CHARSET:e,MANUAL_REDIRECTS:!0}});f=AnyBalance.getLastResponseParameters();c={};h=void 0;for(m=0;m<f.headers.length;++m){var n=f.headers[m],k=n[0].toLowerCase();
0<=["transfer-encoding","content-encoding"].indexOf(k)||("content-length"===k&&(n[1]=""+unescape(encodeURIComponent(p||"")).length),void 0===c[k]?c[k]=n[1]:Array.isArray(c[k])?c[k].push(n[1]):c[k]+=[n[1]],"content-type"===k&&(h=n[1]))}g={id:g.id,page:a,r:{status:AnyBalance.getLastStatusCode(),headers:c,charset:e,contentType:h,body:p}};this.requestAPI("base/response",g)}else if("load"===l.loadStatus)break}while(15>b);if("load"!==l.loadStatus)throw new AnyBalance.Error("Waiting for page "+a+" loading timeout!");
};d.prototype.content=function(a){return this.requestAPI("base/content?page="+a)};d.prototype.cookies=function(a,b){b&&(Array.isArray(b)||(b=[b]));return this.requestAPI("base/cookies",{page:a,urls:b}).cookies};d.prototype.close=function(a){return this.requestAPI("base/close",{page:a})};d.useCookies=function(a){for(var b=0;b<a.length;++b){var e=a[b];AnyBalance.setCookie(e.domain,e.name,e.value,e)}};return d}();
